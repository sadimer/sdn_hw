# Задание по SDN для спецкурса "Современные облачные технологии"

## Гайд по установке и запуску
**Установить на свой компьютер openvswitch**

Для debian/ubuntu: ```sudo apt-get install openvswitch-switch``` 

Для rhel/centos/rocky: ```sudo yum install openvswitch``` или ```sudo dnf install openvswitch```

**Установить mininet и osken:**

```sudo pip install -r requirements.txt```

**Запустить конфигурацию Mininet для отладки вашего алгоритма (на примере задачи 1):**

```sudo python3 tasks/task_1/mininet_cli.py```

**Запустить контроллер OSKen в режиме отладки (на примере задачи 1):**

```sudo osken-manager tasks/task_1/task.py```

**Запустить оценочное тестирование:**

```sudo pytest .```

## Задание 1 (6 баллов из 10)

Необходимо в файле tasks/task_1/task.py реализовать алгоритм классического обучения MAC-адресов (MAC_LEARNING). Это должно быть сделано при помощи фреймворка для написания SDN приложений OSKen.

Механизм обучения MAC-адресов в коммутаторе заключается в следующем:
1) Устройство, получив пакет на каком-либо порту, исследует поля заголовка Ethernet-кадра.
2) Получает из него адрес отправителя.
3) Запоминает порт, по которому пакет пришёл, и добавляет эту запись в таблицу коммутации (в данном задании она называется mac_table и является поле класса SimpleSwitch).
4) В случае, если пакет попадает на коммутатор и в его таблице уже есть запись с указанным с destination MAC-адресом, коммутатор меняет порт назначения у этого пакета на тот, что указан в таблице. 
Если же такой записи не нашлось, коммутатор делает широковещательную рассылку (отправляет пакет на все доступные порты).

Задание быть реализовано при помощи программной обработки пакета, попадающего на контроллер и последующие фиксации правил macth-action, когда устройства уже понимают где находится запрашиваемый ими destination MAC_ADDRESS (и перестают широковещательно рассылать его соседям).
Для этого в таблице каждого коммутатора по умолчанию должно быть macth-action правило с наименьшим приоритетом, 
которое бы отправляло пакет на контроллер, для которого еще нет определенных правил (с destination MAC_ADDRESS). 
При отправке пакета на контроллер программируемый коммутатор генерирует событие EventOFPPacketIn, в теле которого и будут содержаться все слои пакета по модели OSI, доступные для обработки. 
Для того чтобы понять, где именно лежит то или иное нужное Вам поле есть [примеры](https://github.com/faucetsdn/ryu/blob/master/ryu/app) и [документация](https://docs.openstack.org/os-ken/latest/developing.html).